<!--
  ~ Copyright 2021 ACC Cyfronet AGH
  ~
  ~ Licensed under the Apache License, Version 2.0 (the "License");
  ~ you may not use this file except in compliance with the License.
  ~ You may obtain a copy of the License at
  ~
  ~     https://www.apache.org/licenses/LICENSE-2.0
  ~
  ~ Unless required by applicable law or agreed to in writing, software
  ~ distributed under the License is distributed on an "AS IS" BASIS,
  ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  ~ See the License for the specific language governing permissions and
  ~ limitations under the License.
  ~
  -->

<div class="container">
  <div class="intro">
    <a class="logo logo--white" href="/">Sat4Envi Logo</a>
    <div class="intro__content">
      <h1>
        Dane satelitarne na wyciągnięcie ręki
      </h1>
      <p>
        Kompleksowy system udostępniania danych satelitarnych
        z programu Copernicus oraz z innych satelitów środowiskowych i meteorologicznych
      </p>
    </div>
    <img src="../../../assets/images/logo_partners.png" class="logo__partners" width="72%" alt="Partnerzy: IMGW, Cyfronet, CBK" />
  </div>
  <div class="content">
    <div class="logo logo--color"></div>
    <section class="content__switch content__switch--right">
      <p>
        Nie masz jeszcze konta?
      </p>
      <a class="button" routerLink="/register" queryParamsHandling="merge" data-e2e="register-btn">
        Zarejestruj się
      </a>
    </section>
    <div class="content__formContainer">
      <form
        *ngIf="!(token$ | async)"
        [formGroup]="sendTokenForm"
        autocomplete="off"
        class="form"
        (ngSubmit)="sendPasswordResetToken()"
      >
        <h2 class="content__header" i18n>Uzyskaj link resetujący hasło</h2>
        <ul class="form__list">
          <li class="form__element">
            <label for="email" i18n>Email</label>
            <input
              class="form-control"
              formControlName="email"
              id="email"
              type="text"
            >
            <ul s4e-form-error [control]="sendTokenForm.controls.email"></ul>
          </li>
          <li class="form__element">
            <button
              class="button button--primary"
              type="submit"
              [disabled]="sendTokenForm.invalid"
            >
              <ng-container i18n>Wyślij</ng-container>
            </button>
          </li>
        </ul>
        <img src="../../../assets/images/logo_partners.png" class="logo__partners" alt="Partnerzy: IMGW, Cyfronet, CBK"/>
      </form>

      <form
        *ngIf="!!(token$ | async)"
        [formGroup]="resetPasswordForm"
        autocomplete="off"
        class="form"
        (ngSubmit)="resetPassword()"
      >
        <h2 class="content__header" i18n>Resetuj hasło</h2>
        <ul class="form__list">
          <li class="form__element">
            <label for="password" i18n>Nowe hasło:</label>
            <input id="password" type="password" formControlName="password" i18n/>
            <ul s4e-form-error [control]="resetPasswordForm.controls.password"></ul>
          </li>
          <li class="form__element">
            <button
              class="button button--primary"
              type="submit"
              [disabled]="resetPasswordForm.invalid"
            >
              <ng-container i18n>Resetuj hasło</ng-container>
            </button>
          </li>
        </ul>
        <img src="../../../assets/images/logo_partners.png" class="logo__partners" alt="Partnerzy: IMGW, Cyfronet, CBK"/>
      </form>
    </div>
    <section class="content__switch content__switch--left">
      <a routerLink="/login">
        Wróć do strony logowania
      </a>
    </section>
  </div>
</div>
