<div class="settings">
  <nav class="navigation">
    <ul class="navigation__list">
      <li *ngIf="showInstitutions$ | async" routerLinkActive="active"
          data-e2e="dashboard">
        <a [routerLink]="['./dashboard']"
           queryParamsHandling="merge"
           i18n>Start</a>
      </li>
      <li *ngIf="showInstitutions$ | async" routerLinkActive="active"
          data-e2e="institutions">
        <a [routerLink]="['./institutions']"
           queryParamsHandling="merge"
           i18n>Zarządzaj instytucjami</a>
      </li>
    </ul>

    <header *ngIf="showInstitutions$ | async">
      <img src="assets/images/ico_cog.svg" alt="Institution setting icon"/>
      <span>Panel zarządzania instytucją</span>
    </header>
    <ul class="navigation__list navigation__list--institution" *ngIf="showInstitutions$ | async">
      <li>
        <s4e-search
          placeholder="Wpisz szukaną instytucję..."
          [searchResults]="institutions$ | async"
          [isSearchLoading]="institutionsLoading$ | async"
          [isSearchOpen]="isInUse && (areResultsOpen$ | async)"
          [value]="searchValue"

          (selectResult)="selectInstitution($event)"
          (refreshResults)="searchForInstitutions($event)"
          (selectFirstResult)="selectFirstInstitution()"
          (resetSearch)="resetSearch()"
        >
          <ng-template #result let-result>
            <span *ngIf="!!result.name" class="name">{{ result.name }}</span>
            <span *ngIf="!!result.slug" class="type">{{ result.slug }}</span>
          </ng-template>
        </s4e-search>
      </li>
      <li *ngIf="showInstitutions$ | async" routerLinkActive="active">
        <a
          [routerLink]="['./groups']"
          queryParamsHandling="merge"
          [class.disabled]="!(hasSelectedInstitution$ | async)"
          i18n
        >
          Grupy
        </a>
      </li>
      <li *ngIf="showInstitutions$ | async" routerLinkActive="active">
        <a
          [routerLink]="['./people']"
          queryParamsHandling="merge"
          [class.disabled]="!(hasSelectedInstitution$ | async)"
          i18n
        >
          Ludzie
        </a>
      </li>
      <li *ngIf="showInstitutions$ | async" routerLinkActive="active">
        <a
          [routerLink]="['./institution']"
          queryParamsHandling="merge"
          [class.disabled]="!(hasSelectedInstitution$ | async)"
          i18n
        >
          Profil Instytucji
        </a>
      </li>
    </ul>
    <ul class="navigation__list">
      <li routerLinkActive="active" data-e2e="profile">
        <a
          [routerLink]="['./profile']"
          queryParamsHandling="merge"
          i18n
        >
          Twój profil
        </a>
      </li>
    </ul>
    <section class="login">
      <ul>
        <li>
          <button [routerLink]="['/']" i18n class="button button--borderPrimary button--small">Wróć do mapy</button>
        </li>
        <li>
          <a href="javascript:void(0)" routerLink="/logout" i18n>Wyloguj</a>
        </li>
      </ul>
    </section>
  </nav>
  <section class="content">
    <s4e-breadcrumb></s4e-breadcrumb>
    <router-outlet></router-outlet>
  </section>
</div>
