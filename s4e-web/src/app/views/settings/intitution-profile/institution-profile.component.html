<header class="content__header">
  <h1 i18n>Profil instytucji</h1>
</header>
<section class="content__details content__details--75 profile">
  <ng-container *ngIf="!!activeInstitution">
    <div class="profile__content">
      <h2 id="institution-title">{{ activeInstitution.name }}</h2>
      <ul>
        <li id="institution-address">{{ activeInstitution.address }}</li>
        <li id="institution-postal-code">{{ activeInstitution.postalCode }} {{ activeInstitution.city }}</li>
        <li *ngIf="!!activeInstitution.institutionAdminEmail" id="institution-email">
          email: {{ activeInstitution.institutionAdminEmail }}
        </li>
        <li *ngIf="!!activeInstitution.phone" id="institution-phone">
          Telefon: {{ activeInstitution.phone }}
        </li>
        <li *ngIf="!!activeInstitution.secondaryPhone" id="institution-second-phone">
          Telefon: {{ activeInstitution.secondaryPhone }}
        </li>
      </ul>
    </div>
    <aside class="institution__logo">
      <img *ngIf="!!activeInstitution && activeInstitution.emblem" [src]="activeInstitution.emblem" alt="Logo instytucji" />
    </aside>
  </ng-container>
  <footer>
    <button
      class="button button--default button--small"
      [routerLink]="['/settings/edit-institution']"
      queryParamsHandling="merge"
      i18n
    >
      Edytuj dane
    </button>
    <button
      class="button button--secondary button--small"
      [routerLink]="['/settings/add-institution']"
      [queryParams]="{'addChild': true}"
      queryParamsHandling="merge"
      i18n
    >
      Dodaj jednostkę podrzędną
    </button>
  </footer>
</section>

<s4e-generic-list-view [loading]="isLoading$ | async"
                       [items]="institutions$ | async"
                       [error]="error$ | async"
                       [searchable]="true">
  <ng-container description></ng-container>
  <h3 caption-inside i18n>
    <ng-container>Jednostki podległe</ng-container>
  </h3>>
  <ng-container search-label i18n>Szukaj instytucji:</ng-container>
  <ng-container table-header>
    <th i18n>Nazwa instytucji</th>
    <th i18n class="table__actions">Akcje</th>
  </ng-container>
  <ng-template let-inst="item">
    <td [style.padding-left.px]="(inst.ancestorDepth || 0) * 30 + 15">
      <a routerLink="../institution" queryParamsHandling="merge"
         [queryParams]="{institution: inst.slug}">{{inst.name}}</a></td>
    <td >
      <a routerLink="../institution" queryParamsHandling="merge"
         data-e2e="edit"
         [queryParams]="{institution: inst.slug}">
        <img src="/assets/images/ico_edit.svg" alt="Edit" width="15"/>
      </a>
      <a href="javascript:void(0)"
         data-e2e="delete"
         (click)="deleteInstitution(inst.slug)">
        <img src="/assets/images/ico_delete.svg" alt="Delete" width="15"/>
      </a>
    </td>
  </ng-template>
</s4e-generic-list-view>
